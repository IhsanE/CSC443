#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <iostream>

#include "library.h"
using namespace std;


int main () {
    Page *page = (Page *)malloc(sizeof(Page));
    init_fixed_len_page(page, 1000, 100);
    void *buf = malloc(40);
    memset(buf, 0, 40);
    *((int*)buf) = 3;
    cout << *((int *)page->directory) << endl;
    cout << page << endl;
    cout << fixed_len_page_freeslots(page) << endl;
    cout << find_first_free_slot(page) << endl;
    Record r = Record();
    char test_str[] = "ZNVLWXYIND,DWSNUDQCLJ,BJPOSHTXRT,JJRGIIQAGH,HWIRJDCYCA,HEKQTSQCOB,APVVVSAOUM,LQEWEXBXEU,XQYSBEDKYH,KNNLRMVKQW,DLVVPEZWQK,EQWPQGMIRK,EJFJQCBANY,EKVYAKNZXF,YEUCQQYWJK,XWGHEFLYCF,AJAELCZEQF,EFAWPOWFLX,WRHKFFVQWE,SHUXDQQVAN,XWIZXSRARY,XRTWUVWCWF,FBKVTDRDFC,YEYVYBXRFF,YCKCJNUVGR,PNXDREJCFS,OHEVKILSPP,GNLRRODWUT,FJBSEALDWT,WJZKYLYQFC,QKLRAPZBKV,HOXFUEMUTC,MYEYQSUNBS,EBAOAPKHTI,ULDTNTORJP,CRZSDDNCOH,IUASCXIWMB,UBNZGTNDEE,NARSCFRESA,CTCWBLNVLD,ZNOBKUXDDI,VHAEYMNSNA,HJJCDOYPYR,JFFEKWUPRM,BTSISQYFMO,ZOOCTABZMY,BIHBEOSDDP,GDLEAHXXLX,SLGUGXKASJ,XNXUDUBMFV,EEWAQLRBYE,LVAMZYMBCS,LXUERUAWPL,ZSWJIXPLCA,EDZBEJEYXF,LQWOFYCTEC,WDYISDDBJJ,ZXJPWPLHAQ,FSVFEIFYIG,HBVITATLNV,UQJHUMWXFN,YQSILWBRWS,XPVZMDIWMR,GUPJRSVLRM,TOLNIEZMJY,CJMAFPKGKW,NGOIODWYPE,CQAJDLHKWK,OBIRBZIHIZ,TLCBKXMCCK,NNSTEWEGIK,UKKHTVFSMQ,SEHJQSJQWF,MWBXTZLLLY,BZETOUHCOO,AGKBPRVDHH,ZKKGDVAEKG,TOSHQGJLPI,AGFYIDAFYV,SYGPNAKQJH,YEDPDEBCDD,PDUVJLRATB,FJVEVDHZZP,DBHXTSLEPD,FWNYTGRTDK,EUGEGSGFQH,REETYBGSTU,IGNIHJGOMZ,IQSQNLKMRY,CNQTPPUIKS,PFITHHRNFC,OKOZPDGLSO,JKFQWVBLAS,QCGQRQQYJT,DEBTILMMGB,IBNUSOPJZK,ICBTXKKUIX,FWIWSZOKYE,MSYMDHENKL,HTTXZBCEVZ";
    char* char_array = strtok(test_str, ",");
    while (char_array != NULL) {
        r.push_back(char_array);
        char_array = strtok(NULL, ",");
    }
    write_fixed_len_page(page, 0, &r);
    cout << (char *)page->data << endl;
}
